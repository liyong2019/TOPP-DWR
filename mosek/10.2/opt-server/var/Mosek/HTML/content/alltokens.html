<header>
  <h1>All Access Tokens</h1>
</header>
<section id="content" class="wrapper">
  <section class="user-op-div">
    <h2>Create new Token</h2>
    <form id="form-create-token">
      <table>
        <!-- <tr> <td>User</td>        <td> <input type="text" id="inp-userid">     </td> </tr> -->
        <tr> <td>User</td>        <td> <select class="select-user-list" id="inp-userid"></select>     </td> </tr>
        <tr> <td>Description</td> <td> <input type="text" id="inp-desc">       </td> </tr>
        <tr> <td>Expiry date</td> <td> <input type="date" id="input-expiry">   </td> </tr>
        <tr> <td></td>  <td><input type="checkbox" id="inp-perm-submit" checked><label for="inp-perm-submit">Can submit</label> </td></tr>
        <tr> <td></td>  <td><input type="checkbox" id="inp-perm-api" checked><label for="inp-perm-api">Use API</label> </td></tr>
        <tr> <td></td>  <td><input type="checkbox" id="inp-perm-admin"><label for="inp-perm-admin">Administrate</label> </td></tr>
        <tr> <td colspan=2> <input type="button" id="btn-create-token" value="Create access token"> </td> </tr>
        <tr><td> <div class="user-op-spacer"></div> </td></tr>
        <tr> <td>Generated Token:</td><td><input type="text" id="output-token" readonly size="64"/></td> </tr>
      </table>
    </form>
  </section>

  <section>
    <div class="table-wrapper">
      <table id="tokens-table" class="display" data-order='[[3,"asc"]]' class="global">
        <thead>
	  <th data-name="ID">Serial</th>
          <th data-name="Login">Owner</th>
	  <th data-name="Description">Description</th>
	  <th data-name="Timestamp">Issued</th>
	  <th data-name="Expires"     class="data-expires">Expires</th>
	  <th data-name="Permissions" class="data-permissions">Permissions</th>
	  <th class="data-ops"></th>
        </thead>
        <tfoot>
          <tr><th>ID</th><th>Owner</th><th>Description</th><th>Issued</th><th>Expires</th><th>Permissions</th></th><th></th></tr>
        </tfoot>
      </table>
    </div>
  </section>
</section>

<script>
  window.initialized_local = new Promise(async (resolve,reject) => {
    await window.initialized;
    let tokens = await import('/static/script/tokens.mjs');
    await tokens.initialize();
    resolve();
  });
</script>

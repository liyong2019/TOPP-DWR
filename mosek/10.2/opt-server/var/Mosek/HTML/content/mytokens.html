<header>
  <h1>My Access Tokens</h1>
</header>

<section id="content" class="wrapper">
  <section class="user-op-div">
    <h2>Create new Token</h2>
    <form id="form-create-token">
      <table>
        <tr> <td>Description</td> <td> <input type="text" id="inp-desc"> </td> </tr>
        <tr> <td>Expiry (days)</td> <td> <input type="number" id="input-expiry-days" value="60"> </td> </tr>
        <tr> <td></td><td> <input type="checkbox" id="inp-perm-admin"><label for="inp-perm-admin">Administrator</label> </td></tr>
        <tr> <td></td><td> <input type="checkbox" id="inp-perm-submit" checked><label for="inp-perm-submit">Can submit</label> </td></tr>
        <tr> <td></td>  <td><input type="checkbox" id="inp-perm-api" checked><label for="inp-perm-api">Use API</label> </td></tr>
        <tr> <td colspan=2> <input type="button" id="btn-create-token" value="Create access token"> </td> </tr>
        <tr><td> <div class="user-op-spacer"></div> </td></tr>
        <tr> <td>Generated Token:</td><td><input type="text" id="output-token" readonly size="64"/></td> </tr>
      </table>
    </form>
  </section>

  <section>
    <h2>Access Tokens</h2>
    <div class="table-wrapper">
      <table id="tokens-table" class="display" data-order='[[2,"asc"]]'>
        <thead>
          <tr>
	    <th data-name="ID">Serial</th>
	    <th data-name="Description">Description</th>
	    <th data-name="Timestamp">Issued</th>
	    <th data-name="Expires"     class="data-expires">Expires</th>
	    <th data-name="Permissions" class="data-permissions">Submit</th>
	    <th class="data-ops"></th>
        </thead>
        <tfoot>
          <tr><th>ID</th><th>Description</th><th>Issued</th><th>Expires</th><th>Permissions</th><th></th></tr>
        </tfoot>
      </table>
    </div>
  </section>
</section>

<script>
  window.initialized_local = new Promise(async (resolve,reject) => {
    let user = await  window.initialized;
    let tokens = await import('/static/script/tokens.mjs');
    await tokens.initialize(user);
    resolve();
  });
</script>
